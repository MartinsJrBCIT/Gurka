#include <iostream>
#include <string>
#include <cstdlib>
#include <ctime>

using namespace std;

void PLAYTITLE();
int getNumberOfPlayers();
void GAMESTART(int numPlayers);
void delay(int seconds);
void simulateTurns(int numPlayers, string deck[]);
int CHOOSEYOURCARD(int numPlayers, string deck[]);
int main() {
    PLAYTITLE();
    cout << "Press any key to start the game..." << endl;

    if (cin.get()) {
        cout << "Starting the game..." << endl;

        // Wait for 2 seconds
        delay(2);

        // Get the number of players
        int numPlayers = getNumberOfPlayers();

        // Start the game with the specified number of players
        GAMESTART(numPlayers);
    } else {
        cout << "Error starting the game." << endl;
        return 1;
    }

    return 0;
}

void PLAYTITLE() {
    cout << "Welcome to...\n\n\n" << endl;
    cout << " .----------------.  .----------------.  .----------------.  .----------------.  .----------------. " << endl;
    cout << "| .--------------. || .--------------. || .--------------. || .--------------. || .--------------. |" << endl;
    cout << "| |    ______    | || | _____  _____ | || |  _______     | || |  ___  ____   | || |      __      | |" << endl;
    cout << "| |  .' ___  |   | || ||_   _||_   _|| || | |_   __ \\    | || | |_  ||_  _|  | || |     /  \\     | |" << endl;
    cout << "| | / .'   \\_|   | || |  | |    | |  | || |   | |__) |   | || |   | |_/ /    | || |    / /\\ \\    | |" << endl;
    cout << "| | | |    ____  | || |  | '    ' |  | || |   |  __ /    | || |   |  __'.    | || |   / ____ \\   | |" << endl;
    cout << "| | \\ `.___]  _| | || |   \\ `--' /   | || |  _| |  \\ \\_  | || |  _| |  \\ \\_  | || | _/ /    \\ \\_ | |" << endl;
    cout << "| |  `._____.'   | || |    `.__.'    | || | |____| |___| | || | |____||____| | || ||____|  |____|| |" << endl;
    cout << "| |              | || |              | || |              | || |              | || |              | |" << endl;
    cout << "| '--------------' || '--------------' || '--------------' || '--------------' || '--------------' |" << endl;
    cout << " '----------------'  '----------------'  '----------------'  '----------------'  '----------------' " << endl;
    cout << "In this card game:\nPlay against AI... (BRANDON FINISH THIS)" << endl;
    cout << "Out of a stack of 52 cards, 7 out of the 52 cards will be distributed" << endl;
    cout << "The remaining cards will be " << endl;
    
    
    cout << "Good luck!" << endl;
}

int getNumberOfPlayers() {
    int numPlayers;
    do {
        cout << "Enter the number of players (2-4): ";
        cin >> numPlayers;
        if (numPlayers < 2 || numPlayers > 4) {
            cout << "Invalid number of players. Please enter a value between 2 and 4." << endl;
        }
    } while (numPlayers < 2 || numPlayers > 4);
    return numPlayers;
}

void GAMESTART(int numPlayers) {
    cout << "Game has started with " << numPlayers << " players!" << endl;

    // Array of all 52 cards in a French-suited deck
    string suits[] = {" of ♡", " of ♤", " of ♢", " of ♧"};
    string ranks[] = {"Card: 2", "Card: 3", "Card: 4", "Card: 5", "Card: 6", "Card: 7", "Card: 8", "Card: 9", "Card: 10", "Card: J", "Card: Q", "Card: K", "Card: A"};
    string deck[52];

    // Populate the deck
    int index = 0;
    for (int i = 0; i < 4; i++) { // Loop through suits
        for (int j = 0; j < 13; j++) { // Loop through ranks
            deck[index++] = ranks[j] + suits[i];
        }
    }

    // Seed the random number generator
    srand((unsigned int)time(0));

    // Call the simulateTurns function
    simulateTurns(numPlayers, deck);
}

void simulateTurns(int numPlayers, string deck[]) {
    // Simulate the first player's turn
    cout << "Player 1 (You) draws: ";
    delay(1);

         // First player gets 5 cards
    for (int card = 0; card < 7; card++) {
        int randomIndex = rand() % 52;
        cout << deck[randomIndex];
        if (card < 6) cout << ", "; // Add a comma between cards
    }
    cout << endl;
        
        delay(1);

        cout << "Choose which card to play:\n\n\n ";
        // Simulate the player choosing a card 


        int CHOOSEYOURCARD(numPlayers, deck[]); 

        cout << endl;
        delay(1); // Add a small delay between turns
    }


    int CHOOSEYOURCARD(int numPlayers, string deck[]) {
        int cardIndex;
        cout << "Enter the index of the card you want to play (0-6): ";
        cin >> cardIndex;
        if (cardIndex < 0 || cardIndex > 6) {
            cout << "Invalid index. Please enter a value between 0 and 6." << endl;
            return CHOOSEYOURCARD(numPlayers, deck); // Retry if invalid input
        }
        cout << "You played: " << deck[cardIndex] << endl;
        return cardIndex; // Return the chosen card index
    }
void delay(int seconds) {
    clock_t start_time = clock();
    while (clock() < start_time + seconds * CLOCKS_PER_SEC) {
        // Busy-wait loop
    }
}
